{% extends "base.html" %}

{% block content %}

<style>
  :root{
    --bg:#0b0e13; --card:#11161e; --muted:#9fb0c7; --ink:#e9f1ff; --accent:#6ae1b7; --accent2:#8aa7ff;
  }
  .hgg-wrap{max-width:1100px;margin:0 auto;padding:2rem 1rem;}
  .hgg-hero{display:grid;grid-template-columns:1.2fr 1fr;gap:1.5rem;align-items:stretch;background:linear-gradient(135deg,var(--card),#0e1420);border-radius:18px;overflow:hidden;box-shadow:0 10px 30px rgba(0,0,0,.35);}
  .hgg-hero-media{background:#0a0f17;display:flex;align-items:center;justify-content:center;overflow:hidden;}
  .hgg-hero-media img{width:100%;height:100%;object-fit:cover;display:block;filter:saturate(1.1) contrast(1.05);}
  .hgg-hero-body{padding:1.5rem 1.5rem 1.75rem 0;color:var(--ink);}
  .hgg-kicker{font-size:.8rem;letter-spacing:.12em;text-transform:uppercase;color:var(--accent);font-weight:700;margin-bottom:.4rem;}
  .hgg-title{font-size:clamp(1.6rem,2.6vw,2.2rem);line-height:1.15;margin:.2rem 0 .6rem 0;color:var(--ink);}
  .hgg-meta{color:var(--muted);font-size:.9rem;margin-bottom:.8rem;}
  .hgg-excerpt{color:#cfe0ff;opacity:.9;margin-bottom:1.2rem;}
  .hgg-btn{display:inline-block;background:linear-gradient(135deg,var(--accent),var(--accent2));color:#0a0e15;font-weight:800;padding:.7rem 1rem;border-radius:12px;text-decoration:none;box-shadow:0 4px 14px rgba(0,0,0,.25);}
  .hgg-btn:hover{filter:brightness(1.05);}
  .hgg-grid{margin-top:2rem;display:grid;grid-template-columns:repeat(3,1fr);gap:1rem;}
  .hgg-card{background:var(--card);border-radius:14px;overflow:hidden;transition:transform .2s ease, box-shadow .2s ease;}
  .hgg-card:hover{transform:translateY(-2px);box-shadow:0 10px 22px rgba(0,0,0,.25);}
  .hgg-card img{width:100%;height:140px;object-fit:cover;display:block;}
  .hgg-card-body{padding:0.9rem;}
  .hgg-card h3{font-size:1rem;margin:.2rem 0 .35rem 0;color:var(--ink);}
  .hgg-card .meta{font-size:.85rem;color:var(--muted);margin-bottom:.35rem;}
  .hgg-card .excerpt{color:#cfe0ff;opacity:.9;font-size:.92rem;}
  .hgg-section-title{color:var(--ink);font-size:1.1rem;letter-spacing:.06em;text-transform:uppercase;margin:1.6rem 0 .6rem 0;}
  @media (max-width: 900px){
    .hgg-hero{grid-template-columns:1fr;}
    .hgg-hero-body{padding:1rem 1.2rem 1.2rem 1.2rem;}
    .hgg-grid{grid-template-columns:1fr 1fr;}
  }
  @media (max-width: 560px){
    .hgg-grid{grid-template-columns:1fr;}
  }
</style>

<div class="hgg-wrap">

  {% if articles and articles|count > 0 %}
    {# pick the latest article as today's game #}
    {% set hero = articles[0] %}
    <section class="hgg-hero">
      <div class="hgg-hero-media">
        {% if hero.metadata.cover %}
          <img src="{{ hero.metadata.cover }}" alt="{{ hero.title|striptags }}">
        {% else %}
          <!-- fallback block if no cover set -->
          <img src="https://placehold.co/800x450?text=Hidden+Gem+Games" alt="">
        {% endif %}
      </div>
      <div class="hgg-hero-body">
        <div class="hgg-kicker">Today’s Game</div>
        <h1 class="hgg-title"><a href="{{ SITEURL }}/{{ hero.url }}" style="color:inherit;text-decoration:none">{{ hero.title }}</a></h1>
        <div class="hgg-meta">
          {{ hero.date.strftime('%Y-%m-%d %H:%M') }}
          {% if hero.category %} · {{ hero.category }}{% endif %}
          {% if hero.tags and hero.tags|count > 0 %} ·
            {{ hero.tags[0].name }}
            {% if hero.tags|count > 1 %} +{{ hero.tags|count-1 }} more{% endif %}
          {% endif %}
        </div>
        <p class="hgg-excerpt">
          {{ hero.summary if hero.summary else hero.content|striptags|truncate(220) }}
        </p>
        <a class="hgg-btn" href="{{ SITEURL }}/{{ hero.url }}">Read the pick →</a>
      </div>
    </section>

    {# recent picks (skip the hero) #}
    {% if articles|count > 1 %}
      <h2 class="hgg-section-title">Recent picks</h2>
      <div class="hgg-grid">
        {% for a in articles[1:7] %}
          <article class="hgg-card">
            {% if a.metadata.cover %}<img src="{{ a.metadata.cover }}" alt="{{ a.title|striptags }}">{% endif %}
            <div class="hgg-card-body">
              <h3><a href="{{ SITEURL }}/{{ a.url }}" style="text-decoration:none;color:inherit">{{ a.title }}</a></h3>
              <div class="meta">{{ a.date.strftime('%Y-%m-%d %H:%M') }}</div>
              <p class="excerpt">{{ a.summary if a.summary else a.content|striptags|truncate(110) }}</p>
            </div>
          </article>
        {% endfor %}
      </div>
    {% endif %}

  {% else %}
    <p>No articles yet.</p>
  {% endif %}

</div>

{% endblock %}
